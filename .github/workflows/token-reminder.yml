name: Token Renewal Reminder

on:
  schedule:
    # Run on the 1st of every other month (approx every 60 days)
    - cron: "0 9 1 */2 *"
  workflow_dispatch: # Manual trigger for testing

permissions:
  issues: write

jobs:
  create-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Create reminder issue
        uses: actions/github-script@v7
        with:
          script: |
            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: 'ðŸ”‘ Renew LinkedIn Access Token',
              body: `## Token Renewal Required\n\nYour LinkedIn access token expires every 60 days.\n\n### Steps:\n1. Run \`python get_token.py\` locally\n2. Authorize in browser\n3. Copy the new token\n4. Update \`LINKEDIN_ACCESS_TOKEN\` in [Repository Secrets](https://github.com/${context.repo.owner}/${context.repo.repo}/settings/secrets/actions)\n\nSee \`GET_TOKEN.md\` for details.`,
              labels: ['reminder']
            });
